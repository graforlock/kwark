function ajax(e,t){function a(e){o=e,u=e.readyState,s=e.status,r&&n(r)}function n(e){if(u<4)return void(r=e);s>=200&&(s>=300?e.rejected({statusText:c.statusText,statusCode:s}):e.resolved(c.responseText))}if(!(this instanceof ajax))return new ajax(e,t);var r,s,o,i=t.params?serialize(t.params):null,u=0;this.then=function(e,t){n({resolved:e,rejected:t})};var c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.onreadystatechange=function(){a(c)},c.open(e.toUpperCase(),t.url,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(i)}var serialize=require("./kwark-core-addons").serialize.object;module.exports=ajax;